!function(e){"use strict";var t={},n={league:[]},r={leagueName:"League",dropdown:!1,zones:!1};function o(e,t){return e.goalDiff!==t.goalDiff?t.goalDiff-e.goalDiff:(r=t,(n=e).scored!==r.scored?r.scored-n.scored:(o=n,r.name.toLowerCase()<o.name.toLowerCase()));var n,r,o}function a(e){return[].slice.apply(e)}function i(){n.league.forEach(function(e,t){e.position=t+1})}function d(){t.reversed=!t.reversed,n.league.reverse(),n.renderLeague()}function l(e){if(!Array.isArray(e))throw new Error("Invalid argument. Data must be passed within an array.")}function c(e){var t="string"==typeof e?e:e.name,r=n.league.map(function(e){return e.name}).filter(function(e){return e===t});return Boolean(r.length)}function u(){return Boolean(document.querySelector(".league-table table"))}function s(){u()?t.override?n.renderLeague():(n.sort(),n.renderLeague()):t.override||n.sort()}function f(e){var n=document.querySelector(".league-table table"),r=document.createElement("tr");n.appendChild(r);var o=document.createElement("td");o.setAttribute("colspan","10");var a=document.createElement("div");a.setAttribute("class","toggle");var i,d,l=document.createElement("div");i=l,d=e,"show"!==t.toggleState||d?i.classList.add("toggle-arrow-default"):(i.classList.remove("toggle-arrow-default"),i.classList.add("toggle-arrow-collapse")),a.appendChild(l),o.appendChild(a),r.appendChild(o),a.addEventListener("click",p)}function m(){var e=document.querySelectorAll(".league-table table tbody tr");t.toggleState="hidden",a(e).splice(r.dropdown,n.league.length).forEach(function(e){e.classList.add("hide-team")})}function p(){var e,n=document.querySelector(".toggle div");document.querySelectorAll(".hide-team").length?(e=document.querySelectorAll(".hide-team"),t.toggleState="show",a(e).forEach(function(e,t){e.classList.remove("hide-team")}),n.classList.remove("toggle-arrow-default"),n.classList.add("toggle-arrow-collapse")):(m(),n.classList.remove("toggle-arrow-collapse"),n.classList.add("toggle-arrow-default"))}function g(){var e=document.querySelector(".league-table"),o=document.createElement("table"),i=document.createElement("caption");i.innerText=r.leagueName,e.appendChild(o),o.appendChild(i),function(e){var r=document.createElement("thead");e.appendChild(r);var o=document.createElement("tr");r.appendChild(o),["Pos","Team","GP","W","D","L","F","A","GD","Pts"].forEach(function(e){var n=document.createElement("th"),r=document.createElement("abbr");if("Pos"===e){var a=t.reversed?"&#9650":"&#9660",i=document.createElement("span");i.innerHTML=a,r.innerText=e,r.appendChild(i),r.id="reverseTable",n.appendChild(r),o.appendChild(n)}else r.innerText=e,n.appendChild(r),o.appendChild(n)}),i=e,d=n.league,l=document.createElement("tbody"),i.appendChild(l),d.forEach(function(e){var t=[],n=document.createElement("tr");for(var r in n.setAttribute("data",e.position),l.appendChild(n),e)e.hasOwnProperty(r)&&t.push(e[r]);var o,i,d=t[9];t.splice(9,1),t.unshift(d),t.forEach(function(e){var t=document.createElement("td"),r=document.createElement("span");r.innerText=e,t.appendChild(r),n.appendChild(t)}),o=a(n.cells)[8].firstChild,(i=o.innerText)>0?o.classList.add("plus"):i<0&&o.classList.add("minus")});var i,d,l}(o)}function h(){var e=r.zones;l(e);var n=document.querySelectorAll(".league-table tbody tr").length;e.forEach(function(e){if(e>n||e<0)throw new Error("Zone positions are not within valid team range.")});var o=a(document.querySelectorAll(".league-table table tbody tr"));e.forEach(function(e){o.forEach(function(t){Number(t.getAttribute("data"))===e&&(t.id="zone")})}),t.reversed&&r.zones&&a(document.querySelectorAll("#zone")).forEach(function(e){e.id="zoneReverse"})}n.renderLeague=function(e){var n;e&&(t.override=!1,function(e){for(var t in e)r.hasOwnProperty(t)&&(r[t]=e[t])}(e)),a(document.querySelector(".league-table").childNodes).forEach(function(e){("TABLE"===e.nodeName||e.classList.contains("toggle"))&&e.parentNode.removeChild(e)}),g(),document.querySelector("#reverseTable").addEventListener("click",d),r.dropdown&&((n=e)?(f(n),m()):"show"===t.toggleState?f():(f(),m())),r.zones.length&&h()},n.addTeam=function(e){return l(e),t.override=!1,e.forEach(function(e,t,r){if(c(e))throw new Error("Team name already exists.");r[t]={name:e,played:0,won:0,drawn:0,lost:0,scored:0,conceded:0,goalDiff:0,points:0},n.league.push(r[t])}),s(),n.league},n.sort=function(){return t.override=!1,n.league.sort(function(e,t){return e.points!==t.points?t.points-e.points:o(e,t)}),i(),t.reversed&&n.league.reverse(),u()&&n.renderLeague(),n.league},n.updateTeam=function(e){return l(e),e.forEach(function(e){if(!c(e))throw new Error("Team name does not exist.");var t=n.league.filter(function(t){return t.name===e.name})[0];for(var r in e.scored?e.scored=e.scored:e.scored=0,e.conceded?e.conceded=e.conceded:e.conceded=0,t.goalDiff=e.scored-e.conceded,e){if(!t.hasOwnProperty(r))throw new Error("Incorrect team property format passed.");t[r]=e[r]}}),t.override=!1,s(),n.league},n.deleteTeam=function(e){var r;if(!c(e))throw new Error("Team name does not exist.");t.override=!1;var o=e.toLowerCase();return n.league.forEach(function(e,t){e.name.toLowerCase()===o&&(r=t)}),n.league.splice(r,1),s(),n.league},n.override=function(e){t.override=!0,function(e){if(l(e),e.length>2)throw new Error("Only two teams can be swapped at a time.")}(e);var r={},o={};if(n.league.some(function(e){return e.position})||i(),2!==n.league.filter(function(t){return e[0]===t.position||e[1]===t.position}).length)throw new Error("Invalid team position(s).");return n.league.forEach(function(t,n){e[0]===t.position?(t.position=e[1],r.index=n,r.team=t):e[1]===t.position&&(t.position=e[0],o.index=n,o.team=t)}),n.league.forEach(function(e,t,n){t===r.index?n[t]=o.team:t===o.index&&(n[t]=r.team)}),s(),n.league},"function"==typeof e.define&&define.amd?e.define("soccer",[],function(){return n}):e.soccer=n}(this);