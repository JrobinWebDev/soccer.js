!function(e){"use strict";var t={},r={league:[]},n={leagueName:"League",dropdown:!1,zones:!1};function o(e,t){return e.goalDiff!==t.goalDiff?t.goalDiff-e.goalDiff:(n=t,(r=e).scored!==n.scored?n.scored-r.scored:(o=r,n.name.toLowerCase()<o.name.toLowerCase()));var r,n,o}function a(e){return[].slice.apply(e)}function i(){r.league.forEach(function(e,t){e.position=t+1})}function d(){t.reversed=!t.reversed,r.league.reverse(),r.renderLeague()}function l(e){if(!Array.isArray(e))throw new Error("Invalid argument. Data must be passed within an array.")}function c(e){var t="string"==typeof e?e:e.name,n=r.league.map(function(e){return e.name}).filter(function(e){return e===t});return Boolean(n.length)}function u(){return Boolean(document.querySelector(".league-table table"))}function s(){u()?t.override?r.renderLeague():(r.sort(),r.renderLeague()):t.override||r.sort()}function f(e){var r=document.querySelector(".league-table table"),n=document.createElement("tr");r.appendChild(n);var o=document.createElement("td");o.setAttribute("colspan","10");var a=document.createElement("div");a.setAttribute("class","toggle");var i,d,l=document.createElement("div");i=l,d=e,"show"!==t.toggleState||d?i.classList.add("toggle-arrow-default"):(i.classList.remove("toggle-arrow-default"),i.classList.add("toggle-arrow-collapse")),a.appendChild(l),o.appendChild(a),n.appendChild(o),l.addEventListener("click",m)}function g(){var e=document.querySelectorAll(".league-table table tbody tr");t.toggleState="hidden",a(e).splice(n.dropdown,r.league.length).forEach(function(e){e.classList.add("hide-team")})}function m(){var e,r=document.querySelector(".toggle div");document.querySelectorAll(".hide-team").length?(e=document.querySelectorAll(".hide-team"),t.toggleState="show",a(e).forEach(function(e,t){e.classList.remove("hide-team")}),r.classList.remove("toggle-arrow-default"),r.classList.add("toggle-arrow-collapse")):(g(),r.classList.remove("toggle-arrow-collapse"),r.classList.add("toggle-arrow-default"))}function p(){var e=document.querySelector(".league-table"),o=document.createElement("table"),i=document.createElement("caption");i.innerText=n.leagueName,e.appendChild(o),o.appendChild(i),function(e){var n=document.createElement("thead");e.appendChild(n);var o=document.createElement("tr");n.appendChild(o),["Pos","Team","GP","W","D","L","F","A","GD","Pts"].forEach(function(e){var r=document.createElement("th"),n=document.createElement("abbr");if("Pos"===e){var a=t.reversed?"&#9653":"&#9663";n.innerHTML=e+a,n.id="reverseTable",r.appendChild(n),o.appendChild(r)}else n.innerText=e,r.appendChild(n),o.appendChild(r)}),i=e,d=r.league,l=document.createElement("tbody"),i.appendChild(l),d.forEach(function(e){var t,r,n=[];r="+"+(t=e).gd,t.gd>0?t.gd=t.gd.toString().replace(/\s+/g,"").replace(/^\d+/,r):t.gd<0&&(t.gd=t.gd.toString().replace(/\s+/g,""));var o=document.createElement("tr");for(var i in o.setAttribute("data",e.position),l.appendChild(o),e)e.hasOwnProperty(i)&&n.push(e[i]);var d,c,u=n[9];n.splice(9,1),n.unshift(u),n.forEach(function(e){var t=document.createElement("td"),r=document.createElement("span");r.innerText=e,t.appendChild(r),o.appendChild(t)}),d=a(o.cells)[8].firstChild,(c=d.innerText)>0?d.classList.add("plus"):c<0&&d.classList.add("minus")});var i,d,l}(o)}function h(){var e=n.zones;l(e);var r=document.querySelectorAll(".league-table tbody tr").length;e.forEach(function(e){if(e>r||e<0)throw new Error("Zone positions are not within valid team range.")});var o=a(document.querySelectorAll(".league-table table tbody tr"));e.forEach(function(e){o.forEach(function(t){Number(t.getAttribute("data"))===e&&(t.id="zone")})}),t.reversed&&n.zones&&a(document.querySelectorAll("#zone")).forEach(function(e){e.id="zoneReverse"})}r.renderLeague=function(e){var r;e&&(t.override=!1,function(e){for(var t in e)n.hasOwnProperty(t)&&(n[t]=e[t])}(e)),a(document.querySelector(".league-table").childNodes).forEach(function(e){("TABLE"===e.nodeName||e.classList.contains("toggle"))&&e.parentNode.removeChild(e)}),p(),document.querySelector("#reverseTable").addEventListener("click",d),n.dropdown&&((r=e)?(f(r),g()):"show"===t.toggleState?f():(f(),g())),n.zones.length&&h()},r.addTeam=function(e){return l(e),t.override=!1,e.forEach(function(e,t,n){if(c(e))throw new Error("Team name already exists.");n[t]={name:e,played:0,won:0,drawn:0,lost:0,scored:0,conceded:0,goalDiff:0,points:0},r.league.push(n[t])}),s(),r.league},r.sort=function(){return t.override=!1,r.league.sort(function(e,t){return e.points!==t.points?t.points-e.points:o(e,t)}),i(),t.reversed&&r.league.reverse(),u()&&r.renderLeague(),r.league},r.updateTeam=function(e){return l(e),e.forEach(function(e){if(!c(e))throw new Error("Team name does not exist.");var t=r.league.filter(function(t){return t.name===e.name})[0];for(var n in e.scored?e.scored=e.scored:e.scored=0,e.conceded?e.conceded=e.conceded:e.conceded=0,t.goalDiff=e.scored-e.conceded,e){if(!t.hasOwnProperty(n))throw new Error("Incorrect team property format passed.");t[n]=e[n]}}),t.override=!1,s(),r.league},r.deleteTeam=function(e){var n;if(!c(e))throw new Error("Team name does not exist.");t.override=!1;var o=e.toLowerCase();return r.league.forEach(function(e,t){e.name.toLowerCase()===o&&(n=t)}),r.league.splice(n,1),s(),r.league},r.override=function(e){t.override=!0,function(e){if(l(e),e.length>2)throw new Error("Only two teams can be swapped at a time.")}(e);var n={},o={};if(r.league.some(function(e){return e.position})||i(),2!==r.league.filter(function(t){return e[0]===t.position||e[1]===t.position}).length)throw new Error("Invalid team position(s).");return r.league.forEach(function(t,r){e[0]===t.position?(t.position=e[1],n.index=r,n.team=t):e[1]===t.position&&(t.position=e[0],o.index=r,o.team=t)}),r.league.forEach(function(e,t,r){t===n.index?r[t]=o.team:t===o.index&&(r[t]=n.team)}),s(),r.league},"function"==typeof e.define&&define.amd?e.define("soccer",[],function(){return r}):e.soccer=r}(this);