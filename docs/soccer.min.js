!function(e){"use strict";var n={},t={league:[]},r={leagueName:"League",dropdown:!1,zones:!1};function o(e,n){return e.goalDiff!==n.goalDiff?n.goalDiff-e.goalDiff:(r=n,(t=e).scored!==r.scored?r.scored-t.scored:(o=t,r.name.toLowerCase()<o.name.toLowerCase()));var t,r,o}function a(e){return[].slice.apply(e)}function i(){t.league.forEach(function(e,n){e.position=n+1})}function d(){n.reversed=!n.reversed,t.league.reverse(),t.renderLeague()}function c(e){if(!Array.isArray(e))throw new Error("Invalid argument. Data must be passed within an array.")}function l(e){var n="string"==typeof e?e:e.name,r=t.league.map(function(e){return e.name}).filter(function(e){return e===n});return Boolean(r.length)}function u(){return Boolean(document.querySelector(".league-table table"))}function s(){u()?n.override?t.renderLeague():(t.sort(),t.renderLeague()):n.override||t.sort()}function f(e){var n=document.querySelector(".league-table table"),t=document.createElement("tr");n.appendChild(t);var r=document.createElement("td");r.setAttribute("colspan","10");var o=document.createElement("div");o.setAttribute("class","toggle"),function(e){for(var n=0;n<3;n++)e.appendChild(document.createElement("div"))}(o),r.appendChild(o),t.appendChild(r),o.addEventListener("click",p)}function m(){var e=document.querySelectorAll(".league-table table tbody tr");n.toggleState="hidden",a(e).splice(r.dropdown,t.league.length).forEach(function(e){e.classList.add("hide-team")})}function p(){var e;document.querySelectorAll(".hide-team").length?(e=document.querySelectorAll(".hide-team"),n.toggleState="show",a(e).forEach(function(e,n){e.classList.remove("hide-team")})):m()}function h(){var e=document.querySelector(".league-table"),o=document.createElement("table"),i=document.createElement("caption");i.innerText=r.leagueName,e.appendChild(o),o.appendChild(i),function(e){var r=document.createElement("thead");e.appendChild(r);var o=document.createElement("tr");r.appendChild(o),["Pos","Team","GP","W","D","L","F","A","GD","Pts"].forEach(function(e){var t=document.createElement("th"),r=document.createElement("abbr");if("Pos"===e){var a=n.reversed?"&#9650":"&#9660",i=document.createElement("span");i.innerHTML=a,r.innerText=e,r.appendChild(i),r.id="reverseTable",t.appendChild(r),o.appendChild(t)}else r.innerText=e,t.appendChild(r),o.appendChild(t)}),i=e,d=t.league,c=document.createElement("tbody"),i.appendChild(c),d.forEach(function(e){var n=[],t=document.createElement("tr");for(var r in t.setAttribute("data",e.position),c.appendChild(t),e)e.hasOwnProperty(r)&&n.push(e[r]);var o,i,d=n[9];n.splice(9,1),n.unshift(d),n.forEach(function(e){var n=document.createElement("td"),r=document.createElement("span");r.innerText=e,n.appendChild(r),t.appendChild(n)}),o=a(t.cells)[8].firstChild,(i=o.innerText)>0?o.classList.add("plus"):i<0&&o.classList.add("minus")});var i,d,c}(o)}function g(){var e=r.zones;c(e);var t=document.querySelectorAll(".league-table tbody tr").length;e.forEach(function(e){if(e>t||e<0)throw new Error("Zone positions are not within valid team range.")});var o=a(document.querySelectorAll(".league-table table tbody tr"));e.forEach(function(e){o.forEach(function(n){Number(n.getAttribute("data"))===e&&(n.id="zone")})}),n.reversed&&r.zones&&a(document.querySelectorAll("#zone")).forEach(function(e){e.id="zoneReverse"})}t.renderLeague=function(e){e&&(n.override=!1,function(e){for(var n in e)r.hasOwnProperty(n)&&(r[n]=e[n])}(e)),a(document.querySelector(".league-table").childNodes).forEach(function(e){("TABLE"===e.nodeName||e.classList.contains("toggle"))&&e.parentNode.removeChild(e)}),h(),document.querySelector("#reverseTable").addEventListener("click",d),r.dropdown&&(e?(f(),m()):"show"===n.toggleState?f():(f(),m())),r.zones.length&&g()},t.addTeam=function(e){return c(e),n.override=!1,e.forEach(function(e,n,r){if(l(e))throw new Error("Team name already exists.");r[n]={name:e,played:0,won:0,drawn:0,lost:0,scored:0,conceded:0,goalDiff:0,points:0},t.league.push(r[n])}),s(),t.league},t.sort=function(){return n.override=!1,t.league.sort(function(e,n){return e.points!==n.points?n.points-e.points:o(e,n)}),i(),n.reversed&&t.league.reverse(),u()&&t.renderLeague(),t.league},t.updateTeam=function(e){return c(e),e.forEach(function(e){if(!l(e))throw new Error("Team name does not exist.");var n=t.league.filter(function(n){return n.name===e.name})[0];for(var r in e.scored?e.scored=e.scored:e.scored=0,e.conceded?e.conceded=e.conceded:e.conceded=0,n.goalDiff=e.scored-e.conceded,e){if(!n.hasOwnProperty(r))throw new Error("Incorrect team property format passed.");n[r]=e[r]}}),n.override=!1,s(),t.league},t.deleteTeam=function(e){var r;if(!l(e))throw new Error("Team name does not exist.");n.override=!1;var o=e.toLowerCase();return t.league.forEach(function(e,n){e.name.toLowerCase()===o&&(r=n)}),t.league.splice(r,1),s(),t.league},t.override=function(e){n.override=!0,function(e){if(c(e),e.length>2)throw new Error("Only two teams can be swapped at a time.")}(e);var r={},o={};if(t.league.some(function(e){return e.position})||i(),2!==t.league.filter(function(n){return e[0]===n.position||e[1]===n.position}).length)throw new Error("Invalid team position(s).");return t.league.forEach(function(n,t){e[0]===n.position?(n.position=e[1],r.index=t,r.team=n):e[1]===n.position&&(n.position=e[0],o.index=t,o.team=n)}),t.league.forEach(function(e,n,t){n===r.index?t[n]=o.team:n===o.index&&(t[n]=r.team)}),s(),t.league},"function"==typeof e.define&&define.amd?e.define("soccer",[],function(){return t}):e.soccer=t}(this);